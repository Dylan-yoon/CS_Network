# Story 1 HTTP 리퀘스트 메시지를 작성한다.

## 모든 URL에는 하나의 공통점이 있다.

URL의 맨 앞에 있는 문자열로 액세스하는 방법을 나타낸다.

예를 들어 액세스 대상이 웹 서버라면 http:를 작성해서 HTTP 프로토콜을 사용하여 액세스한다.

FTP라면 ftp를 작성해서 FTP라는 프로토콜로 액세스하는 방식이다.

→ 프로토콜 종류가 쓰여있다고 생각하면 된다. (file:로 시작하는 URL과 액세스할 때는 네트워크를 사용하지 않는 경우도 있어서 액세스 방법이라고 생각한는게 더 좋다.)

## URL의 해독

먼저 웹 서버에 보내는 리퀘스트 메시지를 작성하기 위해 URL을 해독한다.

`http://www.lab.cyber.co.kr/dir1/file.html` 의 요소들을 분해하면 아래와 같다.

- `http:`
    - 프로토콜
- `//`
    - 레거시
- `www.lab.cyber.co.kr`
    - 웹 서버의 이름
- `/dir1/`
    - 해당 웹 서버에 있는 경로
- `file.html`
    - 그 경로의의 파일

`/dir1/` 디렉토리의 아래에 있는 `file.html` 파일에 액세스한다.

## 파일명을 생략하는 경우

`/` 로 끝나는 URL도 있음

- `http://www.lab.cyber.co.kr/dir1/`
    - 위 URL 처럼 `/dir1/` 뒤에 파일 명을 생략할 수 있다.
    - → 어느 파일에 액세스해야 할지 정해둔다.
- `http://www.lab.cyber.co.kr/`
    - 이것도 생략한 것이다.
- `http://www.lab.cyber.co.kr/`
    - 이것도 허용한다.
    - 루트 디렉토리 아래에 있는 미리 설정된 파일명의 파일에 액세스한다.
- `http://www.lab.cyber.co.kr/whatisthis`
    - 보통 `whatisthis` 라는 파일이 있으면 파일명으로 치고 디렉토리가 있으면 디렉토리 명으로 본다.

## HTTP 프로토콜

클라이언트와 서버가 주고받는 메시지의 내용이나 순서를 정한 것이다.

## 리퀘스트 메시지

- 첫 행을 리퀘스트 라인이라한다.
    - 리퀘스트의 내용을 대략 알 수 있다.
    - URI를 작성한다.
        - 보통 페이지 데이터를 저장한 파일의 이름이나 CGI 프로그램의 파일명을 URI로 쓰는데 URL을 그대로 쓸 수도 있다.
        - 액세스 대상을 통칭하는 말이 URI이다.
    - 메소드도 작성한다.
        - 웹 서버에 어떤 동작을 하고 싶은지를 전달한다.
    - 버전 번호도 작성한다.
- 다음으로 메시지 헤더를 쓴다.
    - 리퀘스트의 부가적인 정보를 나타낸다.
    - 한행에 한 개의 헤더 필드를 쓴다.
- 다음으로 메시지 본문을 쓴다.
    - POST 메소드로 데이터를 쓰는 곳이다.
- 리퀘스트 메시지에 쓰는 URI는 하나뿐으로 복수의 파일을 읽을 때는 웹 서버에 별도의 리퀘스트 메시지를 보낸다.

## 응답 메시지

- 스테이터스 코드와 응답 문구를 첫 번째 행에 쓴다.
    - 스테이터스 코드는 숫자로 프로그램 등에 실행 결과를 알려주는게 목적이다.
    - 응답 문구는 사람에게 알리는게 목적이다.
