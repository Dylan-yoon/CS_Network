# 방화벽의 원리와 동작
방화벽이 통과시킬 패킷과 차단할 패킷을 선별해야 한다.
  - 다양한 방법이 있지만, 패킷 필터링형에 대해 알아보자

## 패킷 필터링의 조건 설정 개념
패킷 헤더의 제어 정보를 조사해서 필터링
  - 수신처/송신처 IP 주소
  - 수신처/송신처 포트 번호: 애플리케이션을 한정하기 위해 조건으로 사용
  - 컨트롤 비트: 접속 방향(서버 → 인터넷 또는 인터넷 → 서버)을 판단

서버에서 인터넷에 엑세스 하는 것을 정지 시키는 방법
  - 최초에 서버에서 웹 서버측으로 패킷을 보낼 때, 이 패킷을 방화벽에서 차단
  - 상대(인터넷)로부터 두 번째 패킷이 돌아오지 않으므로 접속 동작이 실패로 끝남
  - DNS 서버에 조회하는 동작은 UDP를 사용하는데, UDP는 TCP와 달리 접속 단계 동작이 없기 때문에 컨트롤 비트로 액세스 방향을 판별할 수 없다.

## 사내 LAN에서 공개 서버용 LAN으로 조건을 설정한다
사내 LAN - 인터넷, 사내 LAN - 공개 서버용 LAN을 왕래하는 패킷의 조건을 설정해야 한다.
  - 인터넷과 주고받는 패킷은 주소 변환이 필요하다. 주소 변환은 패킷 필터링형 방화벽에서 담당한다.
    - 주소 변환을 이용하면 인터넷에서는 사내 LAN에 액세스 할 수 없다.
      - 인터넷에 있는 라우터의 경로표에는 프라이빗 주소를 등록하지 않게 되어있기 때문에 인터넷의 라우터는 프라이빗 주소로 갈 패킷을 중계하지 않고 버림
      - 방화벽에 내장된 라우터는 경로표에 프라이빗 주소를 등록 가능
      - → 패킷 필터링 조건 설정 불필요
  - 공개 서버용 LAN과 주고받는 패킷은 주소 변환을 할 필요가 없다.
