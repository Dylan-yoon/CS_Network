### 1. 프로토콜 스택에 HTTP 리퀘스트 메시지를 넘긴다.
    1. `write` 호출 → 송신 데이터를 프로토콜 스택에 전달
    2. 송신용 버퍼 메모리 영역 저장
    3. 데이터 크기 애플리케이션 사정에 따라 결정 - 프로토콜 스택 제어 불가
        (그림 2-5) 
        - MTU, Taximum Transmission Unit : 한 패킷으로 운반할 수 있는 디지털 데이터의 최대 길이, 이더넷에서는 보통 1,500 바이트
        - MSS, Maximum Segment Size : 헤더를 제외한 것이 하나의 패킷으로 운반 할 수 있는 데이터의 최대 길이
            - TCP/IP 헤더 길이 보통 40바이트, 암호화 등 프로토콜 옵션 추가시 헤더는 더 길어짐

### 2. 데이터가 클 때는 분할하여 보낸다        
        - 송신 버퍼에 들어 있는 데이터를 맨 앞부터 차례대로 MSS 크기에 맞게 분할, 각 조각을 패킥에 넣어 송신 (그림 2-6)

### 3. ACK 번호를 사용하여 패킷이 도착했는지 확인한다.
    - 조각이 통신 개시부터 따져서 몇 번째 바이트에 해당하는지를 세어둠.
    - 시퀀스 번호 : 데이터의 조각을 송신할 때 세어둔 값을 TCP헤더에 기록
	- 누락이 없는 것을 확인하면 수신측은 그 이전에 수신한 데이터와 합쳐서 데이터를 몇 번째 바이트까지 수신한 것인지 계산 → TCP 헤더의 ACK 번호에 기록하여 송신측에 전달 (수신 확인 응답)
    - SYN에 1을 설정할 때 시퀀스 번호에도 값을 설정하게 되어 있어 시퀀스 번호의 값이 초기값
    - 데이터 흐름이 양방향인 경우 대응해서 좌우로 역전시킨 것을 덧붙이는 형태     
        (그림 2-9)
        
     - 최초의 초기값 통지가 도중에서 없어질 수 있으므로 이것이 서버에 도착한 것을 알리기 위해 ACK 번호를 반송
    - TCP는 이 방법으로 상대가 데이터를 받은 것을 확인하는데, 확인 할 때까지 송신한 패킷을 송신용 버퍼 메모리 영역에 보관          
    - ACK 번호가 상대로부터 돌아오지 않으면 패킷을 다시 보냄
        → 구조가 강력, 다른 곳에서 오류를 회복 조치할 필요 없음
    - TCP가 아무리 다시 보내도 데이터가 도착하지 않는 경우
        → 한 없이 다시 보내면 곤란하므로 TCP는 몇번 다시 보낸 후 회복의 전망이 없는 것으로 보고 데이터 송신 동작을 강제로 종료하고 애플리케이션에 오류 통지
        > 시퀀스 번호와 ACK 번호로 패킷이 수신측에 도착한 것을 확인
        
### 4. 패킷 평균 왕복 시간으로 ACK 번호의 대기 시간을 조정한다.
    - 타임아웃 값
    - 구체적으로는 데이터 송신 동작을 실행하고 있을 때 항상 ACK 번호가 돌아오는 시간을 계측해 둠
    
### 5. 윈도우 제어 방식으로 효율적으로 ACK 번호를 관리한다.
     - 윈도우 제어는 한 개의 패킷을 보낸 후 ACK 번호를 기다리지 않고 차례대로 연속해서 복수의 패킷을 보내는 방법
    - 수신측의 능력을 초과하여 패킷을 보내는 사태가 일어날 수도 있음 → (그림 2-10)
     - 윈도우 제어 방식의 개념 : 먼저 수신측에서 송신윽에 수신 가능한 데이터 양을 통지하고, 수신측은 이 양을 초과하지 않도록 송신 동작을 실행
    - (그림 2-11) 수신 처리 끝나고 수신 버퍼에 빈 부분이 생기면 그 분량만큼 수신할 수 있는 데이터 양을 늘리므로 TCP 헤더의 윈도우 필드에서 이것을 송신측에 알림
    - 윈도우 사이즈 : 수신 가능한 데이터 양의 최대값

### 6. ACK 번호와 윈도우를 합승한다.
    - 윈도우 통지의 타이밍 : 윈도우 통지가 필요한 것은 수신측이 수신 버퍼에서 데이터를 추출하여 애플리케이션에 건네 주었을때, 데이터를 건네주고 수신 버퍼의 빈 영역이 늘어 났을때
    - 매번 ㅁ차 번호 통지와 윈도우 통지의 패킷이 하나씩 따로따로 송신측에 보내지면 패킷이 많아져 효율성 저하.
        → ACK 번호의 손신을 대조할 때 윈도우 통지가 일어나면 ACK 번호와 윈도우를 한 개의 패킷에 합승시켜서 통지해서 패킷의 수를 줄일 수 있음
            
### 7. HTTP 응답 메시지를 수신한다
    응답 메시지가 돌아올 때까지 다소 시간이 걸리므로 수신 버퍼에 데이터가 들어가지 않음.
    프로토콜 스택은 의뢰 받은 작업
        
    - 수신 버퍼에서 수신 데이터를 추출해서 애플리케이션에 건네주는 작업을 잠시 보류
    - 서버에서 응답 메시지의 패킷이 도착했을 때 그것을 수신해서 애플리케이션에 건내주는 작업 재개