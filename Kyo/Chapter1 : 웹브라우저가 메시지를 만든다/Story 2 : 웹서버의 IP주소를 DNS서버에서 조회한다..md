# 02. 웹서버의 IP주소를 DNS서버에서 조회한다.

<aside>
🔥 브라우저는 기본적으로 HTTP 메시지를 만들지만, 메시지를 네트워크에 송출하는 기능은 없어서 OS에 의뢰해서 송신하게 된다.

- 이 때, URL의 도메인명에서 IP를 따와야한다.
OS에 네트워크 송신 요청할때는 상대의 IP주소를 지정해줘야하기 때문이다.
</aside>

그래서 도메인 명을 가지고 DNS(Domain Name System)에 요청해서 IP를 받아오는 것이다.
<img width = "500px" img src= "https://github.com/AlgoMango/Season2/assets/59204352/5a4467fb-a1db-4045-a9aa-7a435c91e6b3">

<br></br>
### IP주소 구성

- 네트워크 번호 + 호스트 번호

IP주소는 네트워크 번호(동 개념)와 호스트 번호(호수 개념)로 이뤄져있다.

ex)

10.11.12.13/255.255.255.0

/앞은 IP주소, 뒤는 넷마스크이다.
**넷마스크**

- IP주소는 네트워크 번호와 호스트 번호로 이뤄져있지만, 호스트 번호의 위치는 어디에 있어도 상관이 없다.
    - IP 주소 규칙 : 네트워크 번호 + 호스트 번호 = 32비트 (4바이트)
- 때문에 그 위치를 나타내주는 별도의 넷마스크로 알려주는 것이다.
- 넷마스크가 1인 부분은 네트워크 번호, 0인 부분은 호스트 번호 인 것이다.
<img width = "500px" img src= "https://github.com/AlgoMango/Season2/assets/59204352/244363f2-94c4-4103-a6d2-58304e2d33c1">

- 원래는 주소 값 하나하나가 8비트인데, 10진수로 나타낸 것.
<br></br>

### 도메인 명과 IP주소를 구분하는 이유

- IP 주소로 기재하면 최대 32비트로 나타낼 수 있지만, 도메인 명을 사용하면 최대 255바이트까지기 때문에 성능이 떨어진다.
<br></br>

### DNS에서 IP주소를 가져오는 과정

- 클라이언트에서 DNS서버로 요청을 보내는데, 이때 클라이언트는 DNS 리졸버, 리졸버 라고 부르게 된다.
- 리졸버는 Socket 라이브러리에 들어있는 프로그램이다.
    - Socket 라이브러리는 OS의 네트워크 기능을 호출하는 기능을 모아놓은 것이고, 리졸브는 그 중 하나이다.
- 리졸버를 호출하면 리졸버가 DNS 서버에 조회 메세지를 보내고, DNS서버에서 응답메세지가 온다.
- 하지만 메세지 송신동작 그자체는 리졸버가 실행하는 것이아닌, OS 내부 프로토콜 스택을 호출해서 의뢰한다.
    - 프로토콜 스택 : OS에 내장된 네트워크 제어용 소프트웨어

웹 브라우저 ↔ Socket(내부에서 리졸버 실행) ←`DNS 조회, 응답메세지`→ OS 프로토콜 스택

(DNS서버의 IP주소는 컴퓨터에 이미 설정되어 있다.)
