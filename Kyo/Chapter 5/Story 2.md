# 02. 방화벽의 원리와 동작

방화벽 : 특정 서버와 해당 서버 안의 특정 애플리케이션에 액세스하는 패킷만 통과시키고, 그 외의 패킷을 차단한다.

보통 방화벽은 **`패킷 필터링형`**이 보급되어있다.

- 패킷의 헤더에는 통신 동작을 제어하는 제어 정보가 들어있으므로 이것을 조사하면 여러가지 사항을 알 수  있다.

### 패킷 필터링을 하는 조건들

1. 종점(수신처의 IP주소)이 웹 서버의 IP주소에 일치하는 패킷을 통과시킨다는 조건
2. TCP헤더나 UDP헤더에 기록되어 있는 포트번호, 수신처 포트 번호가 80번(예시)과 동일한지를 확인하는 조건
3. 컨트롤 비트 
    - 최초의 패킷만 TCP 컨트롤 비트의 SYN비트가 1이다. ACK비트는 0이다.
    - 이 값들을 확인한다.
4. 사내 LAN과 인터넷 / 사내 LAN과 공개 서버용 LAN을 왕래하는 패킷의 조건도 설정한다.

### 그 외

- 패킷 필터링형 방화벽은 패킷을 통과 시킬지, 차단시킬지를 판단할 뿐 만 아니라 주소 변환의 기능도 가지고 있다.
- 방화벽은 시점과 종점, 포트번호를 조사하기 때문에 패킷 내부에 특수한 데이터가 있어도 패킷을 통과시킨다.

→ 패킷 내부는 검사를 안한다.

- 대처 방법
    1. 버그 고친다..?
    2. 패킷 내부를 조사한다. 
        - (완벽하게 막지는 못한다. 패킷 내용이 위험한지 아닌지 먼저 판단할 수 없기때문에)
